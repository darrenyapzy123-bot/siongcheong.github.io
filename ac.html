<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Air Conditioners | Siong Cheong Trading</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Playfair Display Font -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        /* [样式代码与之前一致，略过以节省篇幅] */
        :root { --bg-color: #0f172a; --card-bg: #1e293b; --text-primary: #f8fafc; --text-secondary: #94a3b8; --accent-blue: #38bdf8; --hover-blue: #7dd3fc; --nav-bg: rgba(15, 23, 42, 0.90); --font-serif: 'Playfair Display', serif; --tag-inverter-bg: rgba(16, 185, 129, 0.2); --tag-inverter-text: #34d399; --tag-non-bg: rgba(245, 158, 11, 0.2); --tag-non-text: #fbbf24; --tag-hp-bg: rgba(56, 189, 248, 0.15); --tag-hp-text: #38bdf8; }
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--bg-color); color: var(--text-primary); -webkit-font-smoothing: antialiased; overflow-x: hidden; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; padding: 0; margin: 0; }
        #main-content { width: 100%; max-width: 100vw; transition: margin-left 0.5s; display: flex; flex-direction: column; min-height: 100vh; position: relative; background-color: var(--bg-color); }
        .menu-icon { position: fixed; top: 25px; left: 25px; z-index: 10000; cursor: pointer; padding: 10px; background-color: rgba(15, 23, 42, 0.8); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 5px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); display: flex; flex-direction: column; gap: 5px; width: 45px; height: 45px; justify-content: center; align-items: center; transition: all 0.3s ease; }
        .menu-icon:hover { border-color: var(--accent-blue); background-color: rgba(15, 23, 42, 1); }
        .bar { width: 20px; height: 2px; background-color: var(--text-primary); transition: 0.4s; }
        .menu-icon:hover .bar { background-color: var(--accent-blue); }
        .sidebar { height: 100%; width: 0; position: fixed; z-index: 10001; top: 0; left: 0; background-color: #020617; overflow-x: hidden; padding-top: 80px; transition: 0.5s; box-shadow: 5px 0 15px rgba(0,0,0,0.5); border-right: 1px solid rgba(255,255,255,0.05); white-space: nowrap; }
        .sidebar a, .sidebar .submenu-toggle { padding: 15px 30px; text-decoration: none; font-size: 1.1em; color: var(--text-secondary); display: block; transition: 0.3s; border-bottom: 1px solid rgba(255,255,255,0.05); cursor: pointer; font-family: var(--font-serif); letter-spacing: 0.5px; }
        .sidebar a:hover, .sidebar .submenu-toggle:hover { color: var(--accent-blue); background: rgba(56, 189, 248, 0.05); padding-left: 35px; border-left: 3px solid var(--accent-blue); }
        .closebtn { position: absolute; top: 20px; right: 25px; font-size: 30px; color: var(--text-secondary); cursor: pointer; transition: 0.3s; }
        .closebtn:hover { color: var(--accent-blue); transform: rotate(90deg); }
        .submenu { display: none; background-color: #0f172a; padding-left: 0; }
        .submenu a { padding-left: 45px; font-size: 0.95em; font-family: -apple-system, BlinkMacSystemFont, sans-serif; border-left: none; }
        .submenu a:hover { border-left: 3px solid var(--accent-blue); padding-left: 50px; }
        .overlay { position: fixed; height: 100%; width: 100%; top: 0; left: 0; background-color: rgba(0, 0, 0, 0.7); z-index: 9999; display: none; backdrop-filter: blur(4px); }
        header { display: flex; align-items: center; justify-content: center; height: 80px; background: rgba(15, 23, 42, 0.90); border-bottom: 1px solid rgba(255, 255, 255, 0.05); position: relative; padding: 0 60px; }
        .header-title { color: var(--text-primary); font-family: var(--font-serif); font-size: 1.5rem; font-weight: 700; letter-spacing: 0.5px; font-style: italic; }
        .header-logo-right { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); width: 150px; height: auto; object-fit: contain; }
        .hero-section { padding-top: 150px; padding-bottom: 60px; text-align: center; background: radial-gradient(circle at center top, #1e293b 0%, #0f172a 70%); }
        .hero-title { font-family: var(--font-serif); font-size: 3.5rem; font-weight: 700; color: var(--text-primary); margin: 0 0 16px 0; letter-spacing: -0.02em; line-height: 1.1; background: linear-gradient(135deg, #fff 0%, #94a3b8 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero-subtitle { font-size: 1.2rem; color: var(--accent-blue); font-weight: 400; margin-bottom: 30px; max-width: 600px; margin-left: auto; margin-right: auto; letter-spacing: 0.5px; }
        .filter-section-wrapper { max-width: 1200px; margin: 0 auto 40px auto; padding: 0 20px; }
        .filter-toggle-button { width: 100%; max-width: 200px; padding: 12px 20px; background-color: transparent; color: var(--accent-blue); font-size: 1rem; font-weight: 600; border: 1px solid rgba(56, 189, 248, 0.3); border-radius: 50px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; margin: 0 auto; }
        .filter-toggle-button:hover { background-color: rgba(56, 189, 248, 0.1); border-color: var(--accent-blue); transform: translateY(-2px); }
        .filter-controls { max-height: 0; overflow: hidden; background: var(--card-bg); border-radius: 20px; margin-top: 20px; transition: all 0.4s ease-out; border: 1px solid rgba(255, 255, 255, 0.05); display: flex; flex-wrap: wrap; gap: 30px; opacity: 0; transform: translateY(-10px); }
        .filter-controls.active { max-height: 500px; padding: 30px; opacity: 1; transform: translateY(0); box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
        .filter-group { flex: 1; min-width: 200px; display: flex; flex-direction: column; gap: 10px; }
        .filter-controls label { font-size: 0.9rem; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
        .filter-controls select { width: 100%; padding: 12px 16px; background-color: #0f172a; color: #fff; border: 1px solid #334155; border-radius: 12px; font-size: 1rem; cursor: pointer; outline: none; transition: border-color 0.3s; appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2338bdf8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 1em; }
        .filter-controls select:focus { border-color: var(--accent-blue); }
        .section-title { text-align: center; font-family: var(--font-serif); color: var(--text-primary); font-size: 2rem; margin-top: 60px; margin-bottom: 30px; position: relative; display: inline-block; left: 50%; transform: translateX(-50%); }
        .section-title::after { content: ''; display: block; width: 60px; height: 3px; background: var(--accent-blue); margin: 10px auto 0; border-radius: 2px; }
        .products-wrapper { max-width: 1200px; margin: 0 auto; padding: 0 20px 60px 20px; }
        .brand-section { margin-bottom: 60px; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; }
        .product-card { background: var(--card-bg); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 20px; overflow: hidden; display: flex; flex-direction: column; transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.3s; position: relative; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4); border-color: rgba(56, 189, 248, 0.3); z-index: 2; }
        .product-card.hidden { display: none; }
        .card-image-wrapper { width: 100%; height: 220px; background-color: #fff; display: flex; align-items: center; justify-content: center; padding: 20px; box-sizing: border-box; position: relative; overflow: hidden; border-bottom: 1px solid #eee; }
        .card-image-wrapper img { max-width: 100%; max-height: 100%; object-fit: contain; transition: transform 0.5s ease; }
        .product-card:hover .card-image-wrapper img { transform: scale(1.08); }
        .product-info { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .product-info h3 { font-family: var(--font-serif); font-size: 1.3rem; color: var(--text-primary); margin: 0 0 10px 0; line-height: 1.2; }
        .product-tags { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
        .tag { font-size: 0.75rem; padding: 4px 10px; border-radius: 6px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        .tag-hp { background-color: var(--tag-hp-bg); color: var(--tag-hp-text); }
        .tag-inverter { background-color: var(--tag-inverter-bg); color: var(--tag-inverter-text); }
        .tag-non-inverter { background-color: var(--tag-non-bg); color: var(--tag-non-text); }
        .product-desc { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 20px; flex-grow: 1; }
        .btn-details { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; background: linear-gradient(135deg, var(--accent-blue) 0%, #0284c7 100%); color: white; font-weight: 600; font-size: 0.95rem; border-radius: 12px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(56, 189, 248, 0.2); box-sizing: border-box; }
        .btn-details:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(56, 189, 248, 0.4); filter: brightness(1.1); }
        .page-footer { background-color: #020617; padding: 40px 20px; text-align: center; font-size: 0.85rem; color: #64748b; border-top: 1px solid rgba(255, 255, 255, 0.05); margin-top: 60px; }
        @media (max-width: 900px) { .header-logo-right { width: 180px; } .hero-title { font-size: 2.5rem; padding: 0 10px; } .section-title { font-size: 1.6rem; } }
    </style>
</head>

<body onload="renderProducts()">

    <!-- Menu Button -->
    <div class="menu-icon" onclick="toggleNav()">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>

    <!-- Sidebar -->
    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="toggleNav()">&times;</a>
        <a href="index.html">Home</a>
        <div class="submenu-toggle" onclick="toggleSubmenu(this)">Products</div>
        <div class="submenu" style="display: block;">
            <a href="refrigerator.html">Refrigerator</a>
            <a href="chiller.html">Chiller</a>
            <a href="freezer.html">Freezer</a>
            <a href="ac.html" class="active" style="color:var(--accent-blue)">Air Conditioner</a>
            <a href="portable_ac.html">Portable Air Cond</a>
            <a href="tv.html">TV</a>
            <a href="washer.html">Washer</a>
            <a href="dryer.html">Dryer</a>
            <a href="kitchen.html">Kitchen Appliances</a>
            <a href="hood.html">Hood</a>
            <a href="gas.html">Gas</a>
            <a href="oven.html">Oven</a>
            <a href="microwave.html">Microwave</a>
            <a href="air_fryer.html">Air Fryer</a>
            <a href="shower.html">Shower</a>
            <a href="air_purifier.html">Air Purifier</a>
            <a href="speaker.html">Speaker</a>
            <a href="small.html">Small Appliances</a>
        </div>
        <a href="about.html">About Us</a>
        <a href="location.html">Our Location</a>
        <a href="contact.html">Contact Us</a>
    </div>

    <!-- Overlay -->
    <div id="overlay" class="overlay" onclick="toggleNav()"></div>

    <!-- Main Content -->
    <div id="main-content">
        
        <header>
            <div class="header-title">Air Conditioner Series</div>
            <img src="SCT_Logo.png" alt="SCT Logo" class="header-logo-right" onerror="this.style.display='none'">
        </header>

        <div class="hero-section">
            <h1 class="hero-title">Air Conditioners</h1>
            <p class="hero-subtitle">Optimal cooling solutions for every space.</p>
        </div>

        <div class="filter-section-wrapper">
            <button id="toggle-filter" class="filter-toggle-button">
                <i class="fas fa-filter"></i> Filter Options
            </button>
            <div class="filter-controls" id="filter-content">
                <div class="filter-group">
                    <label for="brand-filter">Brand</label>
                    <select id="brand-filter" onchange="filterProducts()">
                        <option value="all">All Brands</option>
                        <option value="Sharp">Sharp</option>
                        <option value="Midea">Midea</option>
                        <option value="Hisense">Hisense</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="hp-filter">Horsepower (HP)</label>
                    <select id="hp-filter" onchange="filterProducts()">
                        <option value="all">All Capacities</option>
                        <option value="1.0">1.0 HP</option>
                        <option value="1.5">1.5 HP</option>
                        <option value="2.0">2.0 HP</option>
                        <option value="2.5">2.5 HP</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="type-filter">Technology</label>
                    <select id="type-filter" onchange="filterProducts()">
                        <option value="all">All Types</option>
                        <option value="Inverter">Inverter</option>
                        <option value="Non-Inverter">Non-Inverter</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Product Container -->
        <div class="products-wrapper" id="products-container">
            <!-- JS will render products here -->
            <p id="no-products" style="text-align: center; color: var(--text-secondary); display: none; margin-top: 40px; font-size: 1.2rem;">
                No products found matching your criteria.
            </p>
        </div>
        
        <footer class="page-footer">
            <p>Copyright © 2025 Siong Cheong Trading. All rights reserved.</p>
        </footer>
    </div>

    <!-- Firebase Integration -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
        import { getFirestore, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDacu1ZcdR79rlWJju091GqDHdwbwLM9YE",
            authDomain: "siong-cheong-trading-website.firebaseapp.com",
            projectId: "siong-cheong-trading-website",
            storageBucket: "siong-cheong-trading-website.firebasestorage.app",
            messagingSenderId: "7084102902",
            appId: "1:7084102902:web:5c833ed769d592259848d7",
            measurementId: "G-KTGD0L7DZN"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- Static Products (Preserved) ---
        const staticAcProducts = [
            { brand: "Sharp", model: "Sharp AHA-WCD2 Series", hp: "1.0", type: "Non-Inverter", description: "Features Turbo Mode, Self-Clean function." },
            { brand: "Sharp", model: "Sharp AHX-VED2 Inverter", hp: "1.5", type: "Inverter", description: "Highly energy efficient with Plasmacluster Ion technology." },
            { brand: "Sharp", model: "Sharp AHA-WCD2 Series (2.0HP)", hp: "2.0", type: "Non-Inverter", description: "Ideal for larger rooms, offering powerful and rapid cooling." },
            { brand: "Midea", model: "Midea Xtreme Inverter (1.0HP)", hp: "1.0", type: "Inverter", description: "Uses R32 refrigerant, quiet operation. (RM1188)" },
            { brand: "Midea", model: "Midea Xtreme Inverter (1.5HP)", hp: "1.5", type: "Inverter", description: "Energy-saving model with high-density filter. (RM1390)" },
            { brand: "Hisense", model: "Hisense Smart Inverter (1.0HP)", hp: "1.0", type: "Inverter", description: "\"Save Energy\" model. (RM939)" },
            { brand: "Hisense", model: "Hisense Smart Inverter (1.5HP)", hp: "1.5", type: "Inverter", description: "Excellent energy efficiency, fast cooling." },
            { brand: "Hisense", model: "Hisense Smart Inverter (2.0HP)", hp: "2.0", type: "Inverter", description: "Consistent temperature control for large spaces." },
            { brand: "Hisense", model: "Hisense Basic Cool (1.0HP)", hp: "1.0", type: "Non-Inverter", description: "Reliable performance, simple operation." },
            { brand: "Hisense", model: "Hisense Basic Cool (1.5HP)", hp: "1.5", type: "Non-Inverter", description: "Robust compressor built for tropical climates." },
            { brand: "Hisense", model: "Hisense Basic Cool (2.0HP)", hp: "2.0", type: "Non-Inverter", description: "Powerful airflow for large living areas." },
            { brand: "Hisense", model: "Hisense Basic Cool (2.5HP)", hp: "2.5", type: "Non-Inverter", description: "Maximum cooling capacity." }
        ];

        let allProducts = [...staticAcProducts];

        // --- Fetch Dynamic Products from Firebase ---
        async function fetchDynamicProducts() {
            try {
                // IMPORTANT: This queries products where category is 'ac'
                const q = query(collection(db, "products"), where("category", "==", "ac"));
                const querySnapshot = await getDocs(q);
                
                const dynamicProducts = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    
                    // Use HP and Type directly from Firestore if available
                    let hpValue = data.hp || "1.0";
                    let typeValue = data.type || "Non-Inverter";

                    dynamicProducts.push({
                        brand: data.brand,
                        model: data.model,
                        hp: hpValue,
                        type: typeValue,
                        image: data.image || 'placeholder_ac.png',
                        description: data.description
                    });
                });

                // Merge and Re-render
                allProducts = [...staticAcProducts, ...dynamicProducts];
                renderProducts(allProducts);

            } catch (e) {
                console.error("Error fetching ACs from Firebase:", e);
                // On error, we still show static products
            }
        }

        // --- Render Logic (Global) ---
        window.renderProducts = function(products) {
            const container = document.getElementById('products-container');
            const noProducts = document.getElementById('no-products');
            
            // Clear existing grid items
            const existingGrids = container.querySelectorAll('.brand-section');
            existingGrids.forEach(g => g.remove());

            if (products.length === 0) {
                noProducts.style.display = 'block';
                return;
            } else {
                noProducts.style.display = 'none';
            }

            const brands = [...new Set(products.map(p => p.brand))];

            brands.forEach(brand => {
                const brandProducts = products.filter(p => p.brand === brand);
                if (brandProducts.length > 0) {
                    const section = document.createElement('div');
                    section.className = 'brand-section';
                    
                    const title = document.createElement('h2');
                    title.className = 'section-title';
                    title.textContent = `${brand} Series`;
                    section.appendChild(title);

                    const grid = document.createElement('div');
                    grid.className = 'product-grid';

                    brandProducts.forEach(p => {
                        const card = document.createElement('div');
                        card.className = 'product-card';
                        
                        const typeClass = p.type === 'Inverter' ? 'tag-inverter' : 'tag-non-inverter';
                        const imgSrc = p.image && p.image.startsWith('data') ? p.image : 'placeholder_ac.png';

                        card.innerHTML = `
                            <div class="card-image-wrapper">
                                <img src="${imgSrc}" onerror="this.src='https://placehold.co/300x300/1e293b/FFF?text=AC'">
                            </div>
                            <div class="product-info">
                                <div>
                                    <h3>${p.model}</h3>
                                    <div class="product-tags">
                                        <span class="tag tag-hp">${p.hp} HP</span>
                                        <span class="tag ${typeClass}">${p.type}</span>
                                    </div>
                                    <p class="product-desc">${p.description}</p>
                                </div>
                                <a class="btn-details" href="https://wa.me/601110948581?text=Inquiry: ${p.model}" target="_blank">
                                    More Details <i class="fas fa-angle-right"></i>
                                </a>
                            </div>
                        `;
                        grid.appendChild(card);
                    });

                    section.appendChild(grid);
                    container.appendChild(section);
                }
            });
        };

        // --- Filter Logic ---
        window.filterProducts = function() {
            const brandFilter = document.getElementById('brand-filter').value;
            const hpFilter = document.getElementById('hp-filter').value;
            const typeFilter = document.getElementById('type-filter').value;

            const filtered = allProducts.filter(p => {
                let b = (brandFilter === 'all' || p.brand === brandFilter);
                let h = (hpFilter === 'all' || p.hp === hpFilter);
                let t = (typeFilter === 'all' || p.type === typeFilter);
                return b && h && t;
            });
            renderProducts(filtered);
        };
        
        // Initial Load
        renderProducts(staticAcProducts); 
        fetchDynamicProducts(); // Fetch new items from DB
    </script>

    <!-- Sidebar Scripts -->
    <script>
        function toggleNav() {
            const sidebar = document.getElementById("mySidebar");
            const overlay = document.getElementById("overlay");
            const body = document.body;
            const mainContent = document.getElementById("main-content");
            const isOpen = sidebar.style.width === "250px";

            if (isOpen) {
                sidebar.style.width = "0";
                overlay.style.display = "none";
                body.style.overflow = "auto";
                mainContent.style.marginLeft = "0";
            } else {
                sidebar.style.width = "250px";
                overlay.style.display = "block";
                body.style.overflow = "hidden";
                mainContent.style.marginLeft = "250px";
            }
        }
        window.toggleNav = toggleNav;

        function toggleSubmenu(element) {
            const submenu = element.nextElementSibling;
            submenu.style.display = (submenu.style.display === "block") ? "none" : "block";
        }
        window.toggleSubmenu = toggleSubmenu;

        document.getElementById('toggle-filter').addEventListener('click', function() {
            document.getElementById('filter-content').classList.toggle('active');
        });
    </script>
</body>
</html>
